# Gemini AI Agent Framework

This document provides a technical overview of a Python-based AI agent framework designed to interact with Google's Gemini API. The framework is designed to be modular and extensible, providing a robust foundation for building sophisticated AI agents.

## Core Components

The framework consists of four main components:

1.  **Gemini Client**: A flexible client for connecting to the Gemini API through various backends.
2.  **Tool & Function Calling**: A system for converting Python functions into tools that the Gemini model can call.
3.  **Sandboxed Code Execution**: A secure environment for executing code generated by the AI agent.
4.  **File Management & RAG**: Utilities for managing files and implementing Retrieval-Augmented Generation (RAG).

### 1. Gemini Client

The `Gemini` and `GeminiModel` classes provide the core functionality for connecting to the Gemini API. The client supports multiple backends, including Google Vertex AI, Google AI Studio, and OpenRouter, allowing for flexibility in model selection and API key management.

**Example:**

```python
from gemini_client import Gemini

# Initialize the client with a specific backend
client = Gemini(backend="vertex_ai", api_key="YOUR_API_KEY")

# Select a model
model = client.get_model("gemini-1.5-pro-latest")

# Generate content
response = model.generate_content("Hello, world!")
print(response.text)
```

### 2. Tool & Function Calling

The framework can automatically convert Python functions into a JSON schema compatible with the Gemini API's function calling feature. This allows the language model to invoke your Python code seamlessly. Type hints and docstrings are used to generate the schema.

**Example:**

```python
from tool_converter import tool

@tool
def get_weather(city: str, unit: str = "celsius"):
    """
    Get the current weather for a given city.

    Args:
        city: The city for which to get the weather.
        unit: The temperature unit (celsius or fahrenheit).
    """
    # ... implementation to get weather ...
    return {"temperature": 22, "unit": "celsius"}

# The framework will automatically make this tool available to the model.
```

### 3. Sandboxed Code Execution

A critical feature of the framework is the `execute_code` tool, which allows the AI agent to execute generated code in a secure, sandboxed environment. This is crucial for safely solving complex problems that require code execution. The sandbox can be implemented using technologies like Docker.

**Example:**

```python
# The model can choose to call this function
tools = [execute_code]

response = model.generate_content(
    "Calculate the factorial of 10 and tell me the result.",
    tools=tools
)

# The framework executes the code and returns the result to the model
# which then provides the final answer.
```

### 4. File Management & RAG

The framework includes utilities for interacting with the Gemini File API, allowing you to upload, manage, and retrieve files. It also provides a foundation for building a Retrieval-Augmented Generation (RAG) pipeline by indexing and searching the content of these files.

**Example:**

```python
from file_manager import FileManager

# Initialize the file manager
file_manager = FileManager(client)

# Upload a file
file = file_manager.upload_file("my_document.pdf")

# The model can now access this file for context
response = model.generate_content(
    f"Summarize the document with the file URI: {file.uri}",
)
print(response.text)
```
